# このブログの対象読者

1. ブロックチェーンに興味がある方<br />

# はじめに

ブロックチェーンクイズを出します。このクイズはかなり難問です。以下のチャートは、何を示すチャートでしょうか？

ここで分かった方は、かなりブロックチェーンに詳しい方といえるでしょう。分からなかった方にヒントを出します。チャートの横軸に注目してみてください。横軸は日付を表しています。日付に注目して、あるイベントに気づいた方もいるかもしれません。(西暦が書かれていませんが、２０２２年のチャートになります。)

答えがまだ分からない？という方も多いのではないでしょうか。以下の解説の中でも、ヒントを出していきます。まだ答えが分からないという方は、ヒントを参考に考えてみてください。

チャートが何を示しているか解説していきます。答えはブログの最後に書きます。


# 解説

## チャートで注目するポイント

クイズのチャートを見て目に入ってくるのは、急激に何かが増加していることです。ヒントでも出したように、横軸に注目し急激な増加がいつ起こったか考えます。横軸を読み取ると、急激な増加が起こっているのは九月の中旬であることが分かります。

ブロックチェーンに関するニュースで、九月中旬に起こった出来事といえば何でしょうか？答えはイーサリアムの『The Merge』になります。

一つ目のヒントを出します。チャートは、イーサリアムのThe Mergeが原因により増加したものを表しています。

## イーサリアムの『The Merge』について

イーサリアムのThe Mergeについて簡単に説明します。２０２０年の１２月からイーサリアムでは、PoWを使ったメインネットと、PoSへの移行準備を行うブロックチェーンであるBeacon Chainが存在していました。The Mergeでは、この二つのブロックチェーンが統合され、コンセンサスアルゴリズムがProof-of-work(PoW)からProof-of-stake (PoS)へ移行されました。

PoWとPoSではどのような相違があるのでしょうか？

### Proof-of-work(PoW)

イーサリアムでは、[トランザクション](https://zenn.dev/hokusai/articles/ac26ef75b89d7b)がブロックに取り込まれる必要があります。PoWでは、ブロックはマイニングを通じて、ブロックチェーンに加えられていきます。

PoWはマイナーたちによる、新しいブロックを作る競争です。マイナーは、トランザクションを新しいブロックの候補に追加します。次に、全てのマイナーは計算資源と電力を投入することによって、有効となるnonceを探す競争を行います。有効なnonceを発見できたマイナーのみが、新たなブロックをチェーンに追加することができます。

PoWでは、ブロックを作ったマイナーは、新しく作られたEtherとトランザクション費用の一部を報酬と受け取るシステムになっています。マイニングでは、エネルギー消費を必要とします。マイニングにより不正なブロックを作成するには、莫大なエネルギー消費が必要となります。不正なブロックを作ることにより得る報酬よりも、不正なブロックを作るための消費エネルギー価格の方が大きいため、マイナーは不正を働かなくなります。

### Proof-of-stake(PoS)

PoSでは、PoWに存在したマイナーに代わり、バリデーターが新しいブロックを作る(提案する)ようになりました。PoWでは計算資源を投入し、すべてマイナーが同じ問題に挑戦することで、新しいブロックが作られていました。それに対して、PoSではランダムに選ばれたバリデーターのみがブロックの作成を試みます。

選ばれたバリデーターは、トランザクションを実行し、新しいworld stateを決定します。その情報を含んだブロックを次のブロックの候補として、他のバリデーターに伝えます。ブロックの候補を受け取ったバリデーターは、ブロックの候補に含まれるトランザクションを再実行し、ブロックの候補と同じ結果を得ることができたら、各自のブロックチェーンに追加してきます。

バリデーターになるためには、Etherをステーキングする必要があります。PoSでは、バリデーターはブロック生成において不正を行った場合、ステーキングしているEtherを失う設計になっています。このことがバリデーターが正しく振る舞うインセンティブになっています。

### 移行によって変わったこと

The Mergeにおいて強調されるのはエネルギー消費の減少です。Proof-of-work(PoW)からProof-of-stake (PoS)への移行によって、イーサリアムにおけるエネルギー消費は、最大で９９．９５％減少したと言われています。理由は、エネルギー消費大半がマイニングにより生じていたから。PoSではマイニングを必要としないため、その分のエネルギー消費が削減されることになりました。

二つ目のヒントを出します。問題のチャートは、このマイニングに関係しています。マイニングの状況を示す値のチャートになります。マイニングの状況を示す値には、どのようなものがあるか考えてみてください。

## ハッシュレートとマイニングの関係。ハッシュレートとは？

ブロックチェーンにおけるマイニングの状況を示す値として、ハッシュレートがあります。ハッシュレートについてみていきます。以下、Coincheckの記事から引用。

> ハッシュレートとは、採掘速度ともいわれ、ビットコインなどの暗号資産をマイニングする際の計算力や採掘の速さを表したものです。「hash/s」という単位で表され、1秒間に何回計算が行われるかを示します。

> 多くの人がマイニングに参加し、たくさんの計算が行われると時間あたりの計算量も増えることになるので、ハッシュレートは上がります。逆に、参加する人が少ないと計算量は減りますから、ハッシュレートは下がってしまいます。

このようにハッシュレートの増減により、マイニング状況の変化が読み取れます。The Merge以降、イーサリアムではマイニングが行われていません。etherscanのハッシュレートを示すチャートは、現在０になっていることが確認できます。

三つ目のヒントを出します。問題のチャートは、あるブロックチェーンのハッシュレートになります。PoSへの移行以前に、イーサリアムでマイニングを行っていたマイナー、あるいはマイニングで使用されていた機器がどのブロックチェーンに移動したか考えてみてください。


# 答え

## マイナーの行き先

The Merge以降、イーサリアムでマイニングをしてきたマイナーには二つの選択肢がありました。

1. マイニングを続ける
2. これ以上マイニングは継続しない

継続を決めたマイナー行き先は、もちろんマイニングが行えるところです。継続を決めたマイナーは、マージ以前のイーサリアムと同じPoWに基づいていて、マイニングが必要とされるブロックチェーンに移動することになりました。

答えをいいます。チャートが示しているのは、イーサリアムクラシック（Ethereum Classic）のハッシュレートになります。

クイズのチャートでは、九月以前にもハッシュレートが存在します。このブロックチェーンでは過去にもマイニングが行われていたことが確認できます。そのため、The Mergeの際にPoWを維持して誕生したEthereumPowという答えは、間違えということになります。

## イーサリアムクラシック

イーサリアムクラシックは、過去にイーサリアムと一体をなすブロックチェーンでした。この二つのブロックチェーンは、The DAO事件をきっかけに[分岐した過去](https://ethereumclassic.org/knowledge/history)を持ちます。イーサリアムクラシックにおいては、現在もPoWがコンセンサスアルゴリズムのためマイニングをすることができます。そのため、The Merge後のマイナーたちの移動先の選択肢として、イーサリアムクラシックがありました。


# 最後に

このクイズは難問（愚問？）であったと思います。正直、筆者もチャートのみでは、答えることはできなかったと思います。最初のヒントを参考に、イーサリアムのThe Mergeに関係しているはずと考えた方は、合格といえます。

クイズから始まったブログでしたが、イーサリアムのThe Mergeという重要なテーマにも触れました。またハッシュレートとイーサリアムクラシックの歴史にも触れました。興味を持った方は、参考資料を読んで知識を深めてみてください。最後までご覧いただきありがとうございました。


# 参考資料

The Merge<br />
https://ethereum.org/en/upgrades/merge/

The Beacon Chain
https://ethereum.org/en/upgrades/beacon-chain/

PROOF-OF-WORK (POW)
https://ethereum.org/en/developers/docs/consensus-mechanisms/pow/

PROOF-OF-STAKE (POS)
https://ethereum.org/en/developers/docs/consensus-mechanisms/pos/

BLOCKS
https://ethereum.org/en/developers/docs/blocks/

Miners flee to Ethereum Classic as ‘The Merge’ arrives<br />
https://techcrunch.com/2022/09/15/miners-ethereum-classic-the-merge/

ビットコイン（BTC）のハッシュレートとは？<br />
https://coincheck.com/ja/article/369

Ethereum Classic Hashrate<br />
https://2miners.com/etc-network-hashrate

Ethereum Network Hash Rate Chart
https://etherscan.io/chart/hashrate